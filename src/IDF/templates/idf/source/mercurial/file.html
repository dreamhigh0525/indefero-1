{extends "idf/source/base.html"}
{block extraheader}<link rel="stylesheet" type="text/css" href="{media '/idf/css/prettify.css'}" />{/block}
{block docclass}yui-t1{assign $inSourceTree=true}{/block}

{block body}
<h2 class="top"><a href="{url 'IDF_Views_Source::treeBase', array($project.shortname, $commit)}">{trans 'Root'}</a><span class="sep">/</span>{if $breadcrumb}{$breadcrumb|safe}{/if}</h2>

<table class="code" summary=" ">
{if !$tree_in}
{aurl 'url', 'IDF_Views_Source::commit', array($project.shortname, $commit)}
<tfoot>
<tr><th colspan="2">{blocktrans}Source at commit <a class="mono" href="{$url}">{$commit}</a> created {$cobject.date|dateago}.{/blocktrans}<br />
<span class="smaller">{blocktrans}By {$cobject.author|strip_tags|trim}, {$cobject.title}{/blocktrans}</span>
</th></tr>
</tfoot>
{/if}
<tbody>
{$file}
</tbody>
</table>
{aurl 'url', 'IDF_Views_Source::getFile', array($project.shortname, $commit, $efullpath)}
<p class="right soft"><a href="{$url}"><img style="vertical-align: text-bottom;" src="{media '/idf/img/package-grey.png'}" alt="{trans 'Archive'}" align="bottom" /></a> <a href="{$url}">{trans 'Download this file'}</a></p>
{/block}

{block context}
<div class="expander">
<div class="gradient"></div>
<h1>
  {trans 'Branches'}
  <div class="input-with-delete">
    <input type="text" rel="branch-list" class="filter-list"  title="{trans 'filter branches'}" />
    <span></span>
  </div>
</h1>
<ul id="branch-list">{foreach $branches as $branch => $path}
{aurl 'url', 'IDF_Views_Source::treeBase', array($project.shortname, $branch)}
<li class="label{if in_array($branch, $tree_in)} active{/if}">
  <a href="{$url}" class="label">{$branch}</a>
</li>
{/foreach}
</ul>
{if $tags}
<h1>
  {trans 'Tags'}
  <div class="input-with-delete">
    <input type="text" rel="tag-list" class="filter-list"  title="{trans 'filter tags'}" />
    <span></span>
  </div>
</h1>
<ul id="tag-list">
{foreach $tags as $tag => $path}
{aurl 'url', 'IDF_Views_Source::tree', array($project.shortname, 'HEAD', $path)}
<li class="label{if in_array($tag, $tags_in)} active{/if}">
  <a href="{$url}" class="label">{$tag}</a>
</li>
{/foreach}
</ul>
{/if}
</div>
{/block}

{block javascript}
<script type="text/javascript" src="{media '/idf/js/prettify.js'}"></script>
<script type="text/javascript">prettyPrint();</script>
{/block}
